# 要件定義書

## 概要

この文書は、Model Context Protocol (MCP) を通じてPhaserゲームエンジンのドキュメントへのアクセスを提供するPhaser MCP Serverの開発要件を定義します。このサーバーは、AIアシスタントがPhaserドキュメントを効率的に取得、検索、参照することで、開発者のゲーム開発タスクを支援することを可能にします。

Phaser MCP Serverは、既存のAWS Documentation MCP Serverのアーキテクチャをベースとし、Phaserの公式ドキュメント（<https://docs.phaser.io/phaser/>）とAPIリファレンス（<https://docs.phaser.io/api/>）で動作するように適応させます。

## 要件

### 要件 1

**ユーザーストーリー:** AIアシスタンスを使用するゲーム開発者として、MCPを通じてPhaserドキュメントにアクセスしたい。これにより、Phaser APIと機能に関する正確で最新の情報を取得できる。

#### 受け入れ基準

1. WHEN ユーザーがPhaserドキュメントを要求する THEN システムは <https://docs.phaser.io/phaser/> からコンテンツを取得する
2. WHEN ユーザーが特定のPhaserドキュメントURLを提供する THEN システムはページを取得してMarkdown形式に変換する
3. WHEN ドキュメントページが大きい THEN システムは設定可能な開始インデックスと最大長でページネーションをサポートする
4. WHEN ドキュメントが取得される THEN システムはMarkdownでコード例とフォーマットを保持する

### 要件 2

**ユーザーストーリー:** 開発者として、Phaserドキュメントを検索したい。これにより、正確なURLを知らなくても関連情報を見つけることができる。

#### 受け入れ基準

1. WHEN ユーザーがPhaserコンテンツを検索する THEN システムはPhaserドキュメントドメイン内で検索する
2. WHEN 検索結果が返される THEN システムはページタイトル、URL、コンテンツスニペットを含める
3. WHEN 結果が見つからない THEN システムは一致しないことを示す適切なメッセージを返す
4. WHEN 検索用語が提供される THEN システムはAPIリファレンスとチュートリアルコンテンツの両方の検索をサポートする

### 要件 3

**ユーザーストーリー:** 開発者として、Phaser APIリファレンスドキュメントにアクセスしたい。これにより、クラスメソッド、プロパティ、使用例を理解できる。

#### 受け入れ基準

1. WHEN ユーザーがAPIドキュメントを要求する THEN システムは <https://docs.phaser.io/api/> コンテンツにアクセスする
2. WHEN APIコンテンツが取得される THEN システムはクラス階層とメソッドシグネチャを保持する
3. WHEN APIドキュメントにコード例が含まれる THEN システムは適切なコードフォーマットを維持する
4. WHEN APIページにアクセスされる THEN システムはクラス概要と個別メソッドページの両方を処理する

### 要件 4

**ユーザーストーリー:** 開発者として、MCPサーバーを簡単にインストールして設定したい。これにより、AI開発環境に統合できる。

#### 受け入れ基準

1. WHEN サーバーをインストールする THEN システムはuvxパッケージマネージャー経由で利用可能である
2. WHEN サーバーを設定する THEN システムは標準のMCPクライアント設定をサポートする
3. WHEN サーバーが開始される THEN システムは適切なログ記録とエラーハンドリングで初期化される
4. WHEN 環境変数が設定される THEN システムはログレベルとその他の設定オプションを尊重する

### 要件 5

**ユーザーストーリー:** 開発者として、包括的なエラーハンドリングとログ記録が欲しい。これにより、問題をトラブルシューティングし、サーバーの動作を理解できる。

#### 受け入れ基準

1. WHEN ネットワークエラーが発生する THEN システムは意味のあるエラーメッセージを提供する
2. WHEN 無効なURLが提供される THEN システムは検証して適切なフィードバックで拒否する
3. WHEN レート制限が発生する THEN システムは再試行ロジックで適切に処理する
4. WHEN ログ記録が有効になる THEN システムは設定可能なログレベルと構造化出力を提供する

### 要件 6

**ユーザーストーリー:** 開発者として、サーバーがPythonのベストプラクティスに従うことを望む。これにより、保守可能で信頼性の高いものになる。

#### 受け入れ基準

1. WHEN コードが書かれる THEN システムはPython 3.14+の機能と型ヒントを使用する
2. WHEN 依存関係が管理される THEN システムはuvパッケージマネージャーを使用する
3. WHEN コード品質がチェックされる THEN システムはruffリンティングとpyright型チェックに合格する
4. WHEN テストが実行される THEN システムはpytestで包括的なテストカバレッジを持つ
5. WHEN コミットが行われる THEN システムは従来のコミット標準に従う

### 要件 7

**ユーザーストーリー:** 開発者として、サーバーをコンテナ化したい。これにより、様々な環境にデプロイできる。

#### 受け入れ基準

1. WHEN コンテナをビルドする THEN システムはPython 3.14+ベースのDockerイメージを作成する
2. WHEN コンテナで実行する THEN システムは環境変数設定をサポートする
3. WHEN コンテナのヘルスがチェックされる THEN システムはヘルスチェックエンドポイントを提供する
4. WHEN コンテナがデプロイされる THEN システムは最小限のリソース要件で実行される
